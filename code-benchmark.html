<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>JS Benchmark Playground</title>
  <link rel="stylesheet" href="style.css" />
  <!-- CodeMirror CSS -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css"
  />
  <!-- CodeMirror themes -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/neo.min.css"
  />
</head>
<body>
  <main class="layout">
    <header class="header">
      <h1 class="header-title">JS Benchmark Playground</h1>
      <p class="header-subtitle">
        Сравнивайте производительность двух вариантов JavaScript‑кода. Отредактируйте оба блока и нажмите
        <code>Запустить бенчмарк</code>, чтобы увидеть статистику. Также вы можете запустить бенчмарк с помощью
        сочетаний клавиш <code>Cmd+S</code> (macOS) или <code>Ctrl+S</code> (Windows/Linux).
      </p>
    </header>

    <section class="editors-row">
      <section class="card editor-card">
        <h2>Вариант A</h2>
        <p class="subtitle">
          Например, классический цикл <code>for</code>, который суммирует элементы массива.
        </p>
        <textarea id="code-a" class="code-input" spellcheck="false">const arr = new Array(1_000).fill(1);
let sum = 0;
for (let i = 0; i &lt; arr.length; i++) {
  sum += arr[i];
}</textarea>
      </section>

      <section class="card editor-card">
        <h2>Вариант B</h2>
        <p class="subtitle">
          Альтернативная реализация той же задачи, например <code>Array.prototype.reduce</code>.
        </p>
        <textarea id="code-b" class="code-input" spellcheck="false">const arr = new Array(1_000).fill(1);
const sum = arr.reduce((acc, value) =&gt; acc + value, 0);</textarea>
      </section>
    </section>

    <section class="card" style='display: flex; gap:12px' >
      <div class="field-group">
        <span class="field-label">Тема редактора</span>
        <select id="editor-theme" class="select-input">
          <option value="material-darker" selected>Тёмная — Material Darker</option>
          <option value="dracula">Тёмная — Dracula</option>
          <option value="neo">Светлая — Neo</option>
        </select>
      </div>
       <div class="field-group">
          <span class="field-label">Количество итераций бенчмарка</span>
          <div class="number-input-wrapper">
            <input
              id="iterations"
              class="number-input"
              type="number"
              min="1"
              max="5_000_000"
              step="1"
              value="1000"
            />
            <button
              type="button"
              class="number-input-arrow number-input-arrow--up"
              aria-label="Увеличить количество итераций"
            ></button>
            <button
              type="button"
              class="number-input-arrow number-input-arrow--down"
              aria-label="Уменьшить количество итераций"
            ></button>
          </div>
        </div>
    </section>

    <section class="card">
      <div class="controls-row">
       

        <button id="run-benchmark">Запустить бенчмарк</button>

        <p style="margin: 0; font-size: 0.8rem; color: #6b7280;">
          Совет: начните с меньшего числа итераций, если браузер «подвисает».
        </p>
      </div>
    </section>

    <section class="results-logs-row">
      <section class="card results-card">
        <h2>Результаты бенчмарка</h2>
        <div id="results" class="results">Здесь появятся результаты выполнения кода.</div>
        <div class="hint">
          Запустите тест несколько раз и попробуйте разные браузеры (Chrome, Firefox, Safari), чтобы увидеть, как
          движок влияет на производительность.
        </div>
      </section>

      <section class="card logs-card">
        <div class="logs-header">Логи консоли</div>
        <div id="console-output" class="console-output">
          Здесь появится вывод <code>console.log</code> и <code>console.debug</code> за последний запуск.
        </div>
      </section>
    </section>
  </main>

  <!-- CodeMirror JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>

  <script src="code-benchmark.js"></script>
</body>
</html>


